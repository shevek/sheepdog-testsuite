<configuration>
	<host id="host0" host="10.144.11.103" user="maestro" password="maestro"
			sheep="./sheep_source/sheep/sheep" collie="./sheep_source/collie/collie" />
	<host id="host1" host="10.144.11.109" user="maestro" password="maestro"
			sheep="./sheep_source/sheep/sheep" collie="./sheep_source/collie/collie" />
	<host id="host2" host="10.144.11.116" user="maestro" password="maestro"
			sheep="./sheep_source/sheep/sheep" collie="./sheep_source/collie/collie" />

	<sheep hostId="host0" port="7000" directory="/tmp/sheepdog/7000" />
	<sheep hostId="host0" port="7001" directory="/tmp/sheepdog/7001" />
	<sheep hostId="host0" port="7002" directory="/tmp/sheepdog/7002" />
	<sheep hostId="host0" port="7003" directory="/tmp/sheepdog/7003" />
	<sheep hostId="host0" port="7004" directory="/tmp/sheepdog/7004" />
	<sheep hostId="host0" port="7005" directory="/tmp/sheepdog/7005" />
	<sheep hostId="host0" port="7006" directory="/tmp/sheepdog/7006" />
	<sheep hostId="host0" port="7007" directory="/tmp/sheepdog/7007" />
	<sheep hostId="host0" port="7008" directory="/tmp/sheepdog/7008" />
	<sheep hostId="host0" port="7009" directory="/tmp/sheepdog/7009" />
	<sheep hostId="host0" port="7010" directory="/tmp/sheepdog/7010" />
	<sheep hostId="host0" port="7011" directory="/tmp/sheepdog/7011" />
	<sheep hostId="host0" port="7012" directory="/tmp/sheepdog/7012" />

	<sheep hostId="host1" port="7000" directory="/tmp/sheepdog/7000" />
	<sheep hostId="host1" port="7001" directory="/tmp/sheepdog/7001" />
	<sheep hostId="host1" port="7002" directory="/tmp/sheepdog/7002" />
	<sheep hostId="host1" port="7003" directory="/tmp/sheepdog/7003" />
	<sheep hostId="host1" port="7004" directory="/tmp/sheepdog/7004" />
	<sheep hostId="host1" port="7005" directory="/tmp/sheepdog/7005" />
	<sheep hostId="host1" port="7006" directory="/tmp/sheepdog/7006" />
	<sheep hostId="host1" port="7007" directory="/tmp/sheepdog/7007" />
	<sheep hostId="host1" port="7008" directory="/tmp/sheepdog/7008" />
	<sheep hostId="host1" port="7009" directory="/tmp/sheepdog/7009" />
	<sheep hostId="host1" port="7010" directory="/tmp/sheepdog/7010" />
	<sheep hostId="host1" port="7011" directory="/tmp/sheepdog/7011" />
	<sheep hostId="host1" port="7012" directory="/tmp/sheepdog/7012" />

	<sheep hostId="host2" port="7000" directory="/tmp/sheepdog/7000" />
	<sheep hostId="host2" port="7001" directory="/tmp/sheepdog/7001" />
	<sheep hostId="host2" port="7002" directory="/tmp/sheepdog/7002" />
	<sheep hostId="host2" port="7003" directory="/tmp/sheepdog/7003" />
	<sheep hostId="host2" port="7004" directory="/tmp/sheepdog/7004" />
	<sheep hostId="host2" port="7005" directory="/tmp/sheepdog/7005" />
	<sheep hostId="host2" port="7006" directory="/tmp/sheepdog/7006" />
	<sheep hostId="host2" port="7007" directory="/tmp/sheepdog/7007" />
	<sheep hostId="host2" port="7008" directory="/tmp/sheepdog/7008" />
	<sheep hostId="host2" port="7009" directory="/tmp/sheepdog/7009" />
	<sheep hostId="host2" port="7010" directory="/tmp/sheepdog/7010" />
	<sheep hostId="host2" port="7011" directory="/tmp/sheepdog/7011" />
	<sheep hostId="host2" port="7012" directory="/tmp/sheepdog/7012" />

	<test id="stat">
		<sheep-stat />
	</test>

	<test id="kill">
		<sheep-kill />
	</test>

	<test id="wipe">
		<sheep-wipe />
	</test>

	<test id="step0">
		<sheep-kill />
		<sheep-start sheepId="host0-7000" />
		<sheep-start sheepId="host0-7001,host0-7002" parallel="true" />
		<sheep-start sheepId="host1-7000,host1-7001,host1-7002" parallel="true" />

		<cluster-format copies="2" />
	</test>

	<test id="step1">
		<vdi-create sheepId="host0-7000" name="test-vdi" size="20480" />
		<vdi-write sheepId="host0-7000" name="test-vdi" offset="0" length="20480" />
		<vdi-read sheepId="host1-7000" name="test-vdi" offset="0" length="20480" />
	</test>

	<test id="step2">
		<sheep-start sheepId="host2-7000,host2-7001,host2-7002" parallel="true" strace="true" />
	</test>

	<test id="step3">
		<vdi-read sheepId="host2-7000" name="test-vdi" offset="0" length="20480" />
	</test>

	<test id="desync">
		<subtest testId="wipe" />
		<subtest testId="step0" />
		<subtest testId="step1" />
		<subtest testId="step2" />
		<sleep msecs="2000" />
		<subtest testId="step3" />
	</test>

	<test id="simple-exercise">
		<parallel repeat="10">
			<vdi-create />
		</parallel>
		<parallel repeat="10">
			<vdi-write />
			<vdi-read />
		</parallel>
	</test>

	<test id="simple-singlehost-master">
		<sheep-wipe />
		<sheep-start sheepId="host0-7000" />
		<sheep-start sheepId="host0-7001" />
		<sheep-start sheepId="host0-7002" />
		<cluster-format copies="1" />
		<vdi-create sheepId="host0-7000" name="test-vdi" />
		<vdi-write sheepId="host0-7001" name="test-vdi" />
		<vdi-delete sheepId="host0-7002" name="test-vdi" />
		<subtest testId="simple-exercise" />
	</test>

	<test id="simple-singlehost-slave">
		<sheep-wipe />
		<sheep-start sheepId="host0-7000" />
		<sheep-start sheepId="host0-7001" />
		<sheep-start sheepId="host0-7002" />
		<cluster-format copies="1" />
		<vdi-create sheepId="host0-7002" name="test-vdi" />
		<vdi-write sheepId="host0-7000" name="test-vdi" />
		<vdi-delete sheepId="host0-7001" name="test-vdi" />
		<subtest testId="simple-exercise" />
	</test>

	<test id="simple-multihost-master">
		<sheep-wipe />
		<sheep-start sheepId="host0-7000" />
		<sheep-start sheepId="host1-7000" />
		<sheep-start sheepId="host2-7000" />
		<cluster-format copies="1" />
		<vdi-create sheepId="host0-7000" name="test-vdi" />
		<vdi-write sheepId="host1-7000" name="test-vdi" />
		<vdi-delete sheepId="host2-7000" name="test-vdi" />
		<subtest testId="simple-exercise" />
	</test>

	<test id="simple-multihost-slave">
		<sheep-wipe />
		<sheep-start sheepId="host0-7000" />
		<sheep-start sheepId="host1-7000" />
		<sheep-start sheepId="host2-7000" />
		<cluster-format copies="1" />
		<vdi-create sheepId="host2-7000" name="test-vdi" />
		<vdi-write sheepId="host0-7000" name="test-vdi" />
		<vdi-delete sheepId="host1-7000" name="test-vdi" />
		<subtest testId="simple-exercise" />
	</test>

	<test id="simple-multihost-parallel">
		<sheep-wipe />
		<sheep-start sheepId="host0-7000" />
		<sheep-start sheepId="host0-7001" />
		<sheep-start sheepId="host1-7000" />
		<sheep-start sheepId="host1-7001" />
		<sheep-start sheepId="host2-7000" />
		<sheep-start sheepId="host2-7001" />
		<cluster-format copies="2" />
		<parallel>
			<vdi-create name="test-vdi-0" />
			<vdi-create name="test-vdi-1" />
			<vdi-create name="test-vdi-2" />
			<vdi-create name="test-vdi-3" />
			<vdi-create name="test-vdi-4" />
			<vdi-create name="test-vdi-5" />
			<vdi-create name="test-vdi-6" />
			<vdi-create name="test-vdi-7" />
			<vdi-create name="test-vdi-8" />
			<vdi-create name="test-vdi-9" />
		</parallel>
	</test>

<!--
	<test id="start">
		<sheep-wipe />
		<sheep-start sheepId="host0-7000" />
		<sheep-start sheepId="host0-7001" />
		<sheep-start sheepId="host0-7002" />
		<cluster-format copies="1" />
		<vdi-create name="test0" />
	</test>

	<test id="create">
		<sheep-wipe />
		<sheep-start sheepId="host0-7000" />
		<cluster-format copies="1" />
		<vdi-create name="test0" />
	</test>
-->

	<test id="joinstorm-init">
		<sheep-wipe />
		<sheep-start sheepId="host0-7000" />
		<cluster-format copies="1" />
	</test>

	<test id="joinstorm-storm">
		<parallel>
			<sheep-start sheepId="host0-7001" />
			<sheep-start sheepId="host0-7002" />
			<sheep-start sheepId="host0-7003" />
		</parallel>
	</test>

	<test id="joinstorm">
		<subtest testId="joinstorm-init" />
		<subtest testId="joinstorm-storm" />
	</test>

</configuration>
