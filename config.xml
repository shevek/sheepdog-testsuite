<configuration>
	<host id="A" host="10.144.11.103" user="maestro" password="maestro"
			sheep="./sheep_source/sheep/sheep" collie="./sheep_source/collie/collie" />
	<host id="B" host="10.144.11.109" user="maestro" password="maestro"
			sheep="./sheep_source/sheep/sheep" collie="./sheep_source/collie/collie" />
	<host id="C" host="10.144.11.116" user="maestro" password="maestro"
			sheep="./sheep_source/sheep/sheep" collie="./sheep_source/collie/collie" />

	<sheep hostId="A" port="7000" directory="/tmp/sheepdog/7000" />
	<sheep hostId="A" port="7001" directory="/tmp/sheepdog/7001" />
	<sheep hostId="A" port="7002" directory="/tmp/sheepdog/7002" />
	<sheep hostId="A" port="7003" directory="/tmp/sheepdog/7003" />
	<sheep hostId="A" port="7004" directory="/tmp/sheepdog/7004" />
	<sheep hostId="A" port="7005" directory="/tmp/sheepdog/7005" />
	<sheep hostId="A" port="7006" directory="/tmp/sheepdog/7006" />
	<sheep hostId="A" port="7007" directory="/tmp/sheepdog/7007" />
	<sheep hostId="A" port="7008" directory="/tmp/sheepdog/7008" />
	<sheep hostId="A" port="7009" directory="/tmp/sheepdog/7009" />
	<sheep hostId="A" port="7010" directory="/tmp/sheepdog/7010" />
	<sheep hostId="A" port="7011" directory="/tmp/sheepdog/7011" />
	<sheep hostId="A" port="7012" directory="/tmp/sheepdog/7012" />

	<sheep hostId="B" port="7000" directory="/tmp/sheepdog/7000" />
	<sheep hostId="B" port="7001" directory="/tmp/sheepdog/7001" />
	<sheep hostId="B" port="7002" directory="/tmp/sheepdog/7002" />
	<sheep hostId="B" port="7003" directory="/tmp/sheepdog/7003" />
	<sheep hostId="B" port="7004" directory="/tmp/sheepdog/7004" />
	<sheep hostId="B" port="7005" directory="/tmp/sheepdog/7005" />
	<sheep hostId="B" port="7006" directory="/tmp/sheepdog/7006" />
	<sheep hostId="B" port="7007" directory="/tmp/sheepdog/7007" />
	<sheep hostId="B" port="7008" directory="/tmp/sheepdog/7008" />
	<sheep hostId="B" port="7009" directory="/tmp/sheepdog/7009" />
	<sheep hostId="B" port="7010" directory="/tmp/sheepdog/7010" />
	<sheep hostId="B" port="7011" directory="/tmp/sheepdog/7011" />
	<sheep hostId="B" port="7012" directory="/tmp/sheepdog/7012" />

	<sheep hostId="C" port="7000" directory="/tmp/sheepdog/7000" />
	<sheep hostId="C" port="7001" directory="/tmp/sheepdog/7001" />
	<sheep hostId="C" port="7002" directory="/tmp/sheepdog/7002" />
	<sheep hostId="C" port="7003" directory="/tmp/sheepdog/7003" />
	<sheep hostId="C" port="7004" directory="/tmp/sheepdog/7004" />
	<sheep hostId="C" port="7005" directory="/tmp/sheepdog/7005" />
	<sheep hostId="C" port="7006" directory="/tmp/sheepdog/7006" />
	<sheep hostId="C" port="7007" directory="/tmp/sheepdog/7007" />
	<sheep hostId="C" port="7008" directory="/tmp/sheepdog/7008" />
	<sheep hostId="C" port="7009" directory="/tmp/sheepdog/7009" />
	<sheep hostId="C" port="7010" directory="/tmp/sheepdog/7010" />
	<sheep hostId="C" port="7011" directory="/tmp/sheepdog/7011" />
	<sheep hostId="C" port="7012" directory="/tmp/sheepdog/7012" />

	<test id="stat">
		<sheep-stat />
	</test>

	<test id="kill">
		<sheep-kill />
	</test>

	<test id="wipe">
		<sheep-wipe />
	</test>

	<test id="simple-exercise">
		<parallel repeat="10">
			<vdi-create />
		</parallel>
		<parallel repeat="10">
			<vdi-write />
			<vdi-read />
		</parallel>
	</test>

	<test id="simple-singlehost-master">
		<sheep-wipe />
		<sheep-start sheepId="A-7000" />
		<sheep-start sheepId="A-7001" />
		<sheep-start sheepId="A-7002" />
		<cluster-format copies="1" />
		<vdi-create sheepId="A-7000" name="test-vdi" />
		<vdi-write sheepId="A-7001" name="test-vdi" />
		<vdi-delete sheepId="A-7002" name="test-vdi" />
		<subtest testId="simple-exercise" />
	</test>

	<test id="simple-singlehost-slave">
		<sheep-wipe />
		<sheep-start sheepId="A-7000" />
		<sheep-start sheepId="A-7001" />
		<sheep-start sheepId="A-7002" />
		<cluster-format copies="1" />
		<vdi-create sheepId="A-7002" name="test-vdi" />
		<vdi-write sheepId="A-7000" name="test-vdi" />
		<vdi-delete sheepId="A-7001" name="test-vdi" />
		<subtest testId="simple-exercise" />
	</test>

	<test id="simple-multihost-master">
		<sheep-wipe />
		<sheep-start sheepId="A-7000" />
		<sheep-start sheepId="B-7000" />
		<sheep-start sheepId="C-7000" />
		<cluster-format copies="1" />
		<vdi-create sheepId="A-7000" name="test-vdi" />
		<vdi-write sheepId="B-7000" name="test-vdi" />
		<vdi-delete sheepId="C-7000" name="test-vdi" />
		<subtest testId="simple-exercise" />
	</test>

	<test id="simple-multihost-slave">
		<sheep-wipe />
		<sheep-start sheepId="A-7000" />
		<sheep-start sheepId="B-7000" />
		<sheep-start sheepId="C-7000" />
		<cluster-format copies="1" />
		<vdi-create sheepId="C-7000" name="test-vdi" />
		<vdi-write sheepId="A-7000" name="test-vdi" />
		<vdi-delete sheepId="B-7000" name="test-vdi" />
		<subtest testId="simple-exercise" />
	</test>

	<test id="simple-multihost-parallel">
		<sheep-wipe />
		<sheep-start sheepId="A-7000" />
		<sheep-start sheepId="A-7001" />
		<sheep-start sheepId="B-7000" />
		<sheep-start sheepId="B-7001" />
		<sheep-start sheepId="C-7000" />
		<sheep-start sheepId="C-7001" />
		<cluster-format copies="2" />
		<parallel>
			<vdi-create name="test-vdi-0" />
			<vdi-create name="test-vdi-1" />
			<vdi-create name="test-vdi-2" />
			<vdi-create name="test-vdi-3" />
			<vdi-create name="test-vdi-4" />
			<vdi-create name="test-vdi-5" />
			<vdi-create name="test-vdi-6" />
			<vdi-create name="test-vdi-7" />
			<vdi-create name="test-vdi-8" />
			<vdi-create name="test-vdi-9" />
		</parallel>
	</test>

	<test id="joinstorm-init">
		<sheep-wipe />
		<sheep-start sheepId="A-7000" />
		<cluster-format copies="1" />
	</test>

	<test id="joinstorm-fail">
		<parallel>
			<sheep-start sheepId="A-7001" />
			<sheep-start sheepId="A-7002" />
			<sheep-start sheepId="A-7003" />
		</parallel>
	</test>

	<test id="joinstorm">
		<subtest testId="joinstorm-init" />
		<subtest testId="joinstorm-fail" />
	</test>

	<test id="fpe-init">
		<sheep-wipe />
		<sheep-start sheepId="A-7000" />
		<sheep-start sheepId="A-7001,A-7002" parallel="true" />
		<sheep-start sheepId="B-7000,B-7001,B-7002" parallel="true" />

		<cluster-format copies="2" />

		<vdi-create sheepId="A-7000" name="test-vdi" size="20480" />
		<vdi-write sheepId="A-7000" name="test-vdi" offset="0" length="20480" />
		<vdi-read sheepId="B-7000" name="test-vdi" offset="0" length="20480" />
	</test>

	<test id="fpe-fail">
		<sheep-start sheepId="C-7000" valgrind="true" />
		<!--
		<sheep-start sheepId="C-7000,C-7001,C-7002" parallel="true" valgrind="true" />
		-->
		<sleep msecs="1000" />
		<!-- Fails because the sheep on C died with an FPE. -->
		<vdi-read sheepId="C-7000" name="test-vdi" offset="0" length="20480" />
	</test>

	<test id="fpe">
		<subtest testId="fpe-init" />
		<subtest testId="fpe-fail" />
	</test>

	<test id="desync-init">
		<sheep-wipe />
		<sheep-start sheepId="A-7000" />
		<sheep-start sheepId="A-7001,A-7002,B-7000,B-7001,B-7002" parallel="true" />

		<cluster-format copies="2" />

		<vdi-create sheepId="A-7000" name="test-vdi" size="204800" />
		<vdi-write sheepId="A-7000" name="test-vdi" offset="0" length="204800" />
		<vdi-read sheepId="B-7000" name="test-vdi" offset="0" length="204800" />
	</test>

	<test id="desync-fail">
		<sheep-start sheepId="C-7000,C-7001,C-7002" parallel="true" valgrind="true" />
		<sleep msecs="5000" />
		<vdi-read sheepId="C-7000" name="test-vdi" offset="0" length="204800" />
	</test>

	<test id="desync">
		<subtest testId="desync-init" />
		<subtest testId="desync-fail" />
	</test>

</configuration>
